<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>For Zuzu ðŸŽ€</title>
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript" src="script.js" defer></script>
        <link href="https://fonts.googleapis.com/css?family=Jua&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <style>
            /* Prevent scrolling while dragging */
            body.no-scroll {
                overflow: hidden;
                touch-action: none;
            }
        </style>
    </head>
    <body>
        <span style="color:rgb(255, 255, 255); font-size: 18px; cursor: pointer;" onclick="changeOnFooter()">
            Instructions
        </span>
        <div class="main-Div"> 
            <div class="Character">
                <img src="Img/white_rabbit.png" id="chara-img" style="width:100%;height:100%;object-fit:contain;">
            </div>
            <div class="clot-div" ondragenter="dragenter()" ondrop="drop(event)" ondragover="allowDrop(event)">
                <img src="Img/Clean.png" id="chara-clo" style="width:100%;height:100%;object-fit:contain;">
            </div>
            <div class="Character-clothes">
                <img src="Img/Dress_1.png" id="chara-clothes" style="width:100%;height:100%;object-fit:contain;" draggable="true" 
                     ondragstart="drag(event)" 
                     ontouchstart="touchStart(event)" 
                     ontouchmove="touchMove(event)" 
                     ontouchend="touchEnd(event)">
            </div>
            <div class="Character-color">
                <button class="change-color-White" onclick="changeChcolor('white')">White</button>
                <button class="change-color-black" onclick="changeChcolor('black')">Black</button>
                <button class="change-color-pink" onclick="changeChcolor('pink')">Pink</button>
                <button class="change-color-yellow" onclick="changeChcolor('yellow')">Yellow</button>
                <button class="change-color-blue" onclick="changeChcolor('blue')">Blue</button>
                <button class="change-color-purple" onclick="changeChcolor('purple')">Purple</button>
            </div>
            <div class="clothes-change">
                <i class="fa fa-share fa-flip-horizontal fa-3x" id="icon_a" aria-hidden="true" onclick="downclothesBotton()"></i>
                <i class="fa fa-share fa-3x" aria-hidden="true" onclick="upclothesBotton()"></i>
            </div>
        </div>
        <div class="footer"></div>
        <div class="explanation" id="onoff">
            If you click on any of the 6 colors, the color of the rabbit will change.<br> Drop the clothes onto the rabbit to dress it up.
            <i class="fa fa-times" aria-hidden="true" onclick="changeOffFooter()"></i>
        </div>

        <script>
            function allowDrop(event) {
                event.preventDefault();
            }

            function drag(event) {
                event.dataTransfer.setData("text", event.target.id);
            }

            function drop(event) {
                event.preventDefault();
                let data = event.dataTransfer.getData("text");
                let clothes = document.getElementById(data);
                let target = document.querySelector(".clot-div");
                target.appendChild(clothes);
            }

            // Mobile drag support
            let selectedElement = null;

            function touchStart(event) {
                event.preventDefault();
                selectedElement = event.target;
                document.body.classList.add("no-scroll"); // Stop scrolling
            }

            function touchMove(event) {
                if (!selectedElement) return;
                let touch = event.touches[0];
                selectedElement.style.position = "absolute";
                selectedElement.style.left = touch.clientX - selectedElement.offsetWidth / 2 + "px";
                selectedElement.style.top = touch.clientY - selectedElement.offsetHeight / 2 + "px";
            }

            function touchEnd(event) {
                document.body.classList.remove("no-scroll"); // Allow scrolling again
                selectedElement = null;
            }
        </script>
    </body>
</html>
